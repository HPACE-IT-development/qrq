<script setup lang="ts">
  import companyIcon from '@/widgets/sidebar/assets/companyIcon.vue';
  import myRequestsIcon from '@/widgets/sidebar/assets/myRequstsIcon.vue';
  import myOffersIcon from '@/widgets/sidebar/assets/myOffersIcon.vue';
  import logoutIcon from '@/widgets/sidebar/assets/logoutIcon.vue';
  import { Button } from '@/shared/ui';
  import { type DefineComponent, markRaw, reactive } from 'vue';
  import MyInterestsIcon from "@/widgets/sidebar/assets/myInterestsIcon.vue";

  export interface IButtonMobile {
    label: string;
    action?: () => void;
    icon: DefineComponent<{}, {}, any> | null;
  }

  const emit = defineEmits([
    'close-sidebar',
    'navigate',
    'logout',
    'add-company',
    'my-requests',
    'my-interest'
  ]);

  const sidebarItems = reactive<IButtonMobile[]>([
    {
      label: 'Мои Покупки',
      icon: markRaw(myRequestsIcon),
      action: () => emit('navigate', 'my-requests'),
    },
    {
      label: 'Мои продажи',
      icon: markRaw(myOffersIcon),
      action: () => emit('navigate', 'my-offers'),
    },
    {
      label: 'Мои интересы',
      icon: markRaw(MyInterestsIcon),
      action: () => emit('navigate', 'my-interests'),
    },
    {
      label: 'Переключить аккаунт',
      icon: markRaw(logoutIcon),
      action: () => emit('navigate', 'logout'),
    },
    {
      label: 'Добавить компанию',
      icon: markRaw(companyIcon),
      action: () => emit('navigate', 'add-company'),
    },
  ]);
</script>

<template>
  <div class="h-[100vh] w-full border border-r md:max-w-[356px]">
    <div class="flex items-center border-b p-4 pl-2">
      <Button
        @click="emit('close-sidebar')"
        size="icon"
        variant="ghost"
        class="max-h-[24px]">
        <img src="../assets/exit.svg" alt="exit" />
      </Button>
      <p
        @click="emit('close-sidebar')"
        class="cursor-pointer text-[15px] text-[#0017FC]">
        Закрыть
      </p>
    </div>

    <ul class="flex flex-col gap-y-2 p-4 pl-2">
      <li
        v-for="item in sidebarItems"
        :key="item.label"
        class="flex items-center">
        <Button @click="item.action" size="icon" variant="ghost">
          <component :is="item?.icon" />
        </Button>
        <p
          @click="item.action"
          class="ml-2 cursor-pointer text-[16px] font-semibold">
          {{ item.label }}
        </p>
      </li>
    </ul>
  </div>
</template>

<style scoped lang="postcss"></style>
